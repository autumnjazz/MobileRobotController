package robotpackage;

import basic.Point;
import repositorypackage.Repository;
import sensorpackage.*;

public class Robot implements SIM{
	Point current;
	ColorBlobSensor cs = new ColorBlobSensor();
	HazardSensor hs = new HazardSensor();
	PositionSensor ps = new PositionSensor();
	Repository repo;
	
	public Robot (Repository repo) {
		this.repo = repo;
	}
	
	public Point getCurrent() {
		current = ps.location(repo);
		return current;
	}
	
	public void setCurrent(int x, int y) {
		current.setPoint(x, y);
	}
	
	public void detectSpot() {
		//detect and update hazard
		Point loc = hs.location(repo);
		boolean hresult = hs.checksensor(loc);
		if(hresult) repo.dm.updateHazard(loc);
		//detect and update colorblob
		boolean[] cresult = cs.checksensorAll(repo);
		for(int i = 0; i<4; i++) {
			if(cresult[i]) repo.dm.updateColorblob(cs.location(repo, i));
		}
		
	}
	
}

